# Get your Open AI API Key by following these instructions -
# https://help.openai.com/en/articles/4936850-where-do-i-find-my-openai-api-key
OPENAI_API_KEY=your_openai_api_key

# The LLM to use for the Pydantic AI agent
MODEL_CHOICE=gpt-4o-mini

# Neo4j (knowledge graph) connection details
# Default values are shown here, you'll likely have to adjust the username and password
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=your_password

# Z-API Configuration (WhatsApp Integration)
# Get your credentials at https://www.z-api.io/
ZAPI_INSTANCE_ID=your_instance_id
ZAPI_TOKEN=your_token
ZAPI_CLIENT_TOKEN=your_client_token
ZAPI_BASE_URL=https://api.z-api.io

# ==============================================================================
# ‚ö° WEBHOOK URLS - CONFIGURE THESE IN Z-API DASHBOARD
# ==============================================================================
#
# üì• INPUT WEBHOOK (Z-API sends messages TO your server):
# -------------------------------------------------------
# Configure this URL in Z-API dashboard to RECEIVE messages from WhatsApp:
#
# üîó PRODUCTION OPTIONS:
#    - Railway: https://berenice-ai-production.up.railway.app/webhook/message
#    - Render: https://berenice-ai.onrender.com/webhook/message
#    - VPS: https://seu-dominio.com/webhook/message
#
# üîó DEVELOPMENT (ngrok): https://abc123.ngrok.io/webhook/message
# üîó LOCAL (testing only): http://localhost:8000/webhook/message
#
# ‚ö†Ô∏è PARA GERAR SEU WEBHOOK URL DE PRODU√á√ÉO:
#    Veja o arquivo DEPLOY.md com passo a passo completo!
#
# Where to configure:
# 1. Go to: https://www.z-api.io/admin
# 2. Select your instance
# 3. Click "Webhooks" tab
# 4. Set "Webhook de Mensagens" to: https://your-domain.com/webhook/message
# 5. Set "Webhook de Status" to: https://your-domain.com/webhook/status
# 6. Click "Salvar"
#
# üì§ OUTPUT WEBHOOKS (Your server sends messages TO Z-API):
# -------------------------------------------------------
# These are the Z-API endpoints your server will call to SEND messages:
#
# 1. Send Text Message:
#    POST https://api.z-api.io/instances/{ZAPI_INSTANCE_ID}/token/{ZAPI_TOKEN}/send-text
#
# 2. Send Image:
#    POST https://api.z-api.io/instances/{ZAPI_INSTANCE_ID}/token/{ZAPI_TOKEN}/send-image
#
# 3. Send Document/PDF:
#    POST https://api.z-api.io/instances/{ZAPI_INSTANCE_ID}/token/{ZAPI_TOKEN}/send-document
#
# 4. Send Button List:
#    POST https://api.z-api.io/instances/{ZAPI_INSTANCE_ID}/token/{ZAPI_TOKEN}/send-button-list
#
# 5. Mark as Read:
#    POST https://api.z-api.io/instances/{ZAPI_INSTANCE_ID}/token/{ZAPI_TOKEN}/read-message
#
# 6. Typing Indicator:
#    POST https://api.z-api.io/instances/{ZAPI_INSTANCE_ID}/token/{ZAPI_TOKEN}/send-presence
#
# 7. Get Instance Status:
#    GET https://api.z-api.io/instances/{ZAPI_INSTANCE_ID}/token/{ZAPI_TOKEN}/status
#
# ‚ö†Ô∏è IMPORTANT: All OUTPUT requests must include this header:
#    Client-Token: {ZAPI_CLIENT_TOKEN}
#
# ==============================================================================

# Clinic Configuration
CLINIC_NAME=Instituto dental life
CLINIC_PHONE=551141183589
CLINIC_ADDRESS=Rua Groenlandia 848, Jardim America - Sao Paulo - SP

# Application Settings
DEBUG=True
PORT=8000
HOST=0.0.0.0

# ==============================================================================
# WEBHOOK CONFIGURATION - Z-API MESSAGE FORMAT
# ==============================================================================
#
# The Z-API will send POST requests to your webhook endpoint with the following structure:
#
# INPUT MESSAGE FORMAT (Webhook receives from Z-API):
# -------------------------------------------------------
# POST https://your-domain.com/webhook/message
# Content-Type: application/json
#
# {
#   "messageId": "msg_3EB06F19B43",
#   "instanceId": "your_instance_id",
#   "phone": "5511999999999",
#   "fromMe": false,
#   "momment": 1696598400000,
#   "status": "RECEIVED",
#   "chatName": "Jo√£o Silva",
#   "senderName": "Jo√£o Silva",
#   "senderPhoto": "https://...",
#   "participantPhone": null,
#   "photo": "https://...",
#   "broadcast": false,
#   "type": "ReceivedCallback",
#   "text": {
#     "message": "Ol√°, quero fazer um clareamento dental"
#   },
#   "isGroup": false,
#   "isNewsletter": false,
#   "waitingMessage": false
# }
#
# OTHER MESSAGE TYPES:
# - image: { "imageUrl": "https://...", "caption": "Foto do dente", "mimeType": "image/jpeg" }
# - audio: { "audioUrl": "https://...", "mimeType": "audio/ogg" }
# - video: { "videoUrl": "https://...", "caption": "Video", "mimeType": "video/mp4" }
# - document: { "documentUrl": "https://...", "fileName": "documento.pdf", "mimeType": "application/pdf" }
# - location: { "latitude": -23.5505, "longitude": -46.6333, "address": "S√£o Paulo" }
# - contact: { "displayName": "Dr. Jo√£o", "vcard": "BEGIN:VCARD..." }
#
# OUTPUT MESSAGE FORMAT (Your API sends to Z-API):
# -------------------------------------------------------
# POST https://api.z-api.io/instances/{instance_id}/token/{token}/send-text
# Headers:
#   Client-Token: your_client_token
#   Content-Type: application/json
#
# {
#   "phone": "5511999999999",
#   "message": "Ol√°! Temos hor√°rios dispon√≠veis para clareamento..."
# }
#
# OTHER OUTPUT TYPES:
#
# 1. Send Image:
# POST .../send-image
# {
#   "phone": "5511999999999",
#   "image": "https://your-domain.com/images/tratamento.jpg",
#   "caption": "Veja nossos resultados de clareamento"
# }
#
# 2. Send Document:
# POST .../send-document
# {
#   "phone": "5511999999999",
#   "document": "https://your-domain.com/docs/orcamento.pdf",
#   "fileName": "Or√ßamento_Clareamento.pdf"
# }
#
# 3. Send Button List:
# POST .../send-button-list
# {
#   "phone": "5511999999999",
#   "title": "Escolha o hor√°rio",
#   "description": "Hor√°rios dispon√≠veis para consulta:",
#   "buttons": [
#     {"id": "1", "label": "Amanh√£ 09:00"},
#     {"id": "2", "label": "Amanh√£ 14:00"},
#     {"id": "3", "label": "Quinta 10:30"}
#   ]
# }
#
# 4. Mark as Read:
# POST .../read-message
# {
#   "phone": "5511999999999",
#   "messageId": "msg_3EB06F19B43"
# }
#
# 5. Typing Indicator:
# POST .../send-presence
# {
#   "phone": "5511999999999",
#   "status": "composing"  // or "available" to stop typing
# }
#
# ==============================================================================
# WEBHOOK SETUP IN Z-API DASHBOARD
# ==============================================================================
#
# 1. Go to https://www.z-api.io/admin
# 2. Select your instance
# 3. Click on "Webhooks" tab
# 4. Configure:
#    - Webhook de Mensagens: https://your-domain.com/webhook/message
#    - Webhook de Status: https://your-domain.com/webhook/status
# 5. Click "Salvar"
#
# For local development, use ngrok:
#   ngrok http 8000
#   Then use the ngrok URL: https://abc123.ngrok.io/webhook/message
#
# ==============================================================================
# MESSAGE FLOW EXAMPLE
# ==============================================================================
#
# 1. Patient sends: "Ol√°, quero agendar uma limpeza"
#    ‚Üì
# 2. Z-API POSTs to: https://your-domain.com/webhook/message
#    {
#      "phone": "5511999999999",
#      "text": { "message": "Ol√°, quero agendar uma limpeza" }
#    }
#    ‚Üì
# 3. Your webhook processes message ‚Üí Berenice AI agent responds
#    ‚Üì
# 4. Your API POSTs to Z-API: .../send-text
#    {
#      "phone": "5511999999999",
#      "message": "Ol√°! Tenho hor√°rios dispon√≠veis..."
#    }
#    ‚Üì
# 5. Patient receives message on WhatsApp
#
# ==============================================================================
# TESTING YOUR WEBHOOK
# ==============================================================================
#
# Test webhook reception:
# curl -X POST http://localhost:8000/webhook/message \
#   -H "Content-Type: application/json" \
#   -d '{
#     "messageId": "test_123",
#     "phone": "5511999999999",
#     "fromMe": false,
#     "text": { "message": "teste" },
#     "senderName": "Teste",
#     "momment": 1696598400000
#   }'
#
# ==============================================================================